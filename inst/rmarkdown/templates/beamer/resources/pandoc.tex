\PassOptionsToPackage{unicode$for(hyperrefoptions)$,$hyperrefoptions$$endfor$}{hyperref}

%%% BEAMER SETUP

\documentclass[
  $if(fontsize)$
    $fontsize$,
  $endif$
  $for(classoption)$
    $classoption$$sep$,
  $endfor$
]{beamer}

$if(theme)$
  \usetheme[$for(themeoptions)$$themeoptions$$sep$,$endfor$]{$theme$}
$endif$
$if(colortheme)$
  \usecolortheme{$colortheme$}
$endif$
$if(fonttheme)$
  \usefonttheme{$fonttheme$}
$endif$
$if(mainfont)$
  \usefonttheme{serif} % use mainfont rather than sansfont for slide text
$endif$
$if(innertheme)$
  \useinnertheme{$innertheme$}
$endif$
$if(outertheme)$
  \useoutertheme{$outertheme$}
$endif$

\beamertemplatenavigationsymbols$if(navigation)$$navigation$$else$empty$endif$

\setbeamertemplate{footline}{%
  \begin{beamercolorbox}[wd=\textwidth, sep=1ex]{footline}%
    \usebeamerfont{page number in head/foot}%
    \usebeamertemplate*{frame footer}
    \hfill%
    \insertsection \quad
    \insertframenumber/\inserttotalframenumber
  \end{beamercolorbox}%
}

\definecolor{titleCol}{HTML}{000000}
\setbeamercolor{titlelike}{fg=titleCol}
\setbeamercolor{frametitle}{fg=titleCol}
\setbeamercolor{structure}{fg=titleCol}

\AtBeginSection[]{
  $if(toc-section)$
    \begin{frame}{$toc-title$}
          \tableofcontents[currentsection]
    \end{frame}
  $endif$
}

\setbeamerfont{itemize/enumerate subbody}{size=\small}
\setbeamerfont{itemize/enumerate subitem}{size=\small}

%%% FONT FAMILY

$if(fontfamily)$
  \usepackage[$for(fontfamilyoptions)$$fontfamilyoptions$$sep$,$endfor$]{$fontfamily$}
$else$
  \usepackage{lmodern}
$endif$


%%% LISTINGS

\usepackage{listings}                     % http://ctan.math.utah.edu/ctan/tex-archive/macros/latex/contrib/listings/listings.pdf

$if(base-col)$
  \definecolor{baseCol}{HTML}{$base-col$}
$else$
  \definecolor{baseCol}{HTML}{000000}
$endif$
$if(chunk-background-col)$
  \definecolor{backgroundCol}{HTML}{$chunk-background-color$}
$else$
  \definecolor{backgroundCol}{HTML}{ffffff}
$endif$
$if(string-col)$
  \definecolor{stringstyleCol}{HTML}{string-col}
$else$
  \definecolor{stringstyleCol}{HTML}{9b2c32} % red
$endif$
$if(comment-col)$
  \definecolor{commentstyleCol}{HTML}{$comment-col$}
$else$
  \definecolor{commentstyleCol}{HTML}{b3b1b1}
$endif$
$if(keyword-col)$
  \definecolor{keywordstyleCol}{HTML}{$keyword-col$}
$else$
  \definecolor{keywordstyleCol}{HTML}{000000}
$endif$
$if(output-col)$
  \definecolor{outputCol}{HTML}{$output-col$}
$else$
  \definecolor{outputCol}{HTML}{8e8582}
$endif$
\lstdefinelanguage{R}{
  keywords={abbreviate,abline,abs,acos,acosh,action,add1,add,%
            aggregate,alias,Alias,alist,all,anova,any,aov,aperm,append,apply,%
            approx,approxfun,apropos,Arg,args,array,arrows,as,asin,asinh,%
            atan,atan2,atanh,attach,attr,attributes,autoload,autoloader,ave,%
            axis,backsolve,barplot,basename,besselI,besselJ,besselK,besselY,%
            beta,binomial,body,box,boxplot,break,browser,bug,builtins,bxp,by,%
            c,C,call,Call,case,cat,category,cbind,ceiling,character,char,%
            charmatch,check,chol,chol2inv,choose,chull,class,close,cm,codes,%
            coef,coefficients,co,col,colnames,colors,colours,commandArgs,%
            comment,complete,complex,conflicts,Conj,contents,contour,%
            contrasts,contr,control,helmert,contrib,convolve,cooks,coords,%
            distance,coplot,cor,cos,cosh,count,fields,cov,covratio,wt,CRAN,%
            create,crossprod,cummax,cummin,cumprod,cumsum,curve,cut,cycle,D,%
            data,dataentry,date,dbeta,dbinom,dcauchy,dchisq,de,debug,%
            debugger,Defunct,default,delay,delete,deltat,demo,de,density,%
            deparse,dependencies,Deprecated,deriv,description,detach,%
            dev2bitmap,dev,cur,deviance,off,prev,,dexp,df,dfbetas,dffits,%
            dgamma,dgeom,dget,dhyper,diag,diff,digamma,dim,dimnames,dir,%
            dirname,dlnorm,dlogis,dnbinom,dnchisq,dnorm,do,dotplot,double,%
            download,dpois,dput,drop,drop1,dsignrank,dt,dummy,dump,dunif,%
            duplicated,dweibull,dwilcox,dyn,edit,eff,effects,eigen,else,%
            emacs,end,environment,env,erase,eval,equal,evalq,example,exists,%
            exit,exp,expand,expression,External,extract,extractAIC,factor,%
            fail,family,fft,file,filled,find,fitted,fivenum,fix,floor,for,%
            For,formals,format,formatC,formula,Fortran,forwardsolve,frame,%
            frequency,ftable,ftable2table,function,gamma,Gamma,gammaCody,%
            gaussian,gc,gcinfo,gctorture,get,getenv,geterrmessage,getOption,%
            getwd,gl,glm,globalenv,gnome,GNOME,graphics,gray,grep,grey,grid,%
            gsub,hasTsp,hat,heat,help,hist,home,hsv,httpclient,I,identify,if,%
            ifelse,Im,image,\%in\%,index,influence,measures,inherits,install,%
            installed,integer,interaction,interactive,Internal,intersect,%
            inverse,invisible,IQR,is,jitter,kappa,kronecker,labels,lapply,%
            layout,lbeta,lchoose,lcm,legend,length,levels,lgamma,library,%
            licence,license,lines,list,lm,load,local,locator,log,log10,log1p,%
            log2,logical,loglin,lower,lowess,ls,lsfit,lsf,ls,machine,Machine,%
            mad,mahalanobis,make,link,margin,match,Math,matlines,mat,matplot,%
            matpoints,matrix,max,mean,median,memory,menu,merge,methods,min,%
            missing,Mod,mode,model,response,mosaicplot,mtext,mvfft,na,nan,%
            names,omit,nargs,nchar,ncol,NCOL,new,next,NextMethod,nextn,%
            nlevels,nlm,noquote,NotYetImplemented,NotYetUsed,nrow,NROW,null,%
            numeric,\%o\%,objects,offset,old,on,Ops,optim,optimise,optimize,%
            options,or,order,ordered,outer,package,packages,page,pairlist,%
            pairs,palette,panel,par,parent,parse,paste,path,pbeta,pbinom,%
            pcauchy,pchisq,pentagamma,persp,pexp,pf,pgamma,pgeom,phyper,pico,%
            pictex,piechart,Platform,plnorm,plogis,plot,pmatch,pmax,pmin,%
            pnbinom,pnchisq,pnorm,points,poisson,poly,polygon,polyroot,pos,%
            postscript,power,ppoints,ppois,predict,preplot,pretty,Primitive,%
            print,prmatrix,proc,prod,profile,proj,prompt,prop,provide,%
            psignrank,ps,pt,ptukey,punif,pweibull,pwilcox,q,qbeta,qbinom,%
            qcauchy,qchisq,qexp,qf,qgamma,qgeom,qhyper,qlnorm,qlogis,qnbinom,%
            qnchisq,qnorm,qpois,qqline,qqnorm,qqplot,qr,Q,qty,qy,qsignrank,%
            qt,qtukey,quantile,quasi,quit,qunif,quote,qweibull,qwilcox,%
            rainbow,range,rank,rbeta,rbind,rbinom,rcauchy,rchisq,Re,read,csv,%
            csv2,fwf,readline,socket,real,Recall,rect,reformulate,regexpr,%
            relevel,remove,rep,repeat,replace,replications,report,require,%
            resid,residuals,restart,return,rev,rexp,rf,rgamma,rgb,rgeom,R,%
            rhyper,rle,rlnorm,rlogis,rm,rnbinom,RNGkind,rnorm,round,row,%
            rownames,rowsum,rpois,rsignrank,rstandard,rstudent,rt,rug,runif,%
            rweibull,rwilcox,sample,sapply,save,scale,scan,scan,screen,sd,se,%
            search,searchpaths,segments,seq,sequence,setdiff,setequal,set,%
            setwd,show,sign,signif,sin,single,sinh,sink,solve,sort,source,%
            spline,splinefun,split,sqrt,stars,start,stat,stem,step,stop,%
            storage,strstrheight,stripplot,strsplit,structure,strwidth,sub,%
            subset,substitute,substr,substring,sum,summary,sunflowerplot,svd,%
            sweep,switch,symbol,symbols,symnum,sys,status,system,t,table,%
            tabulate,tan,tanh,tapply,tempfile,terms,terrain,tetragamma,text,%
            time,title,topo,trace,traceback,transform,tri,trigamma,trunc,try,%
            ts,tsp,typeof,unclass,undebug,undoc,union,unique,uniroot,unix,%
            unlink,unlist,unname,untrace,update,upper,url,UseMethod,var,%
            variable,vector,Version,vi,warning,warnings,weighted,weights,%
            which,while,window,write,\%x\%,x11,X11,xedit,xemacs,xinch,xor,%
            xpdrows,xy,xyinch,yinch,zapsmall,zip},
  otherkeywords={!,!=,=,<,>,*,/,-,+,_,~,$$,\%,\&},
  alsoother={._$$},
  sensitive,
  morecomment=[l]\#,
  morecomment=[l][\color{outputCol}]{\#>}, % output style
  morestring=[d]",
  morestring=[d]',
  morekeywords={TRUE,FALSE}
}
\lstdefinestyle{myR}{
  backgroundcolor=\color{backgroundCol},  % background color set by YAML frontmatter
  basicstyle=\ttfamily\color{baseCol},    % basic font style applied to code chunk
  columns=fullflexible,                   % how to set space between columns/characters
  breaklines=true,                        % if true, wrap lines
  breakatwhitespace=true,                 % if true, only break lines at whitespace
  breakindent=$if(chunk-breakindent)$$chunk-breakindent$$else$20pt$endif$, % indentation of broken lines
  showstringspaces=false,                 % hide space indicator
  showtabs=false,                         % hide tab indicator
  keywordstyle=\color{keywordstyleCol},   % keyword style
  commentstyle=\color{commentstyleCol},   % comment style
  stringstyle=\color{stringstyleCol},     % string literal style
  frame=single,
  frameround=tttt,
  rulecolor=\color{baseCol}
}
\lstset{
  % language=R,
  style=myR,
  literate=
  {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
  {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
  {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
  {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
  {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
  {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
  {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
  {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
  {Ã}{{\~A}}1 {ã}{{\~a}}1 {Õ}{{\~O}}1 {õ}{{\~o}}1
  {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
  {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
  {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
  {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
  {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
}

\newcommand{\passthrough}[1]{#1}

%%% PACKAGES

\usepackage{amsmath}

% {kableExtra} LaTeX packages
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}

% TikZ packages

$if(tikz)$
\usepackage{pgfplots}
\pgfplotsset{compat=1.17}
\usepackage{tikz}
$endif$
$if(tikzlibrary)$
\usetikzlibrary{$for(tikzlibrary)$ $tikzlibrary$ $set$, $endfor$}
$endif$


%%% FORMATTING

$if(highlighting-macros)$
  $highlighting-macros$
$endif$

%%% LISTS

\providecommand{\tightlist}{%
  \setlength{\itemsep}{5pt}
  \setlength{\parskip}{0pt}
  \setlength{\itemindent}{0pt}
}

\setlength{\leftmargini}{0pt}

%%% BIBLIOGRAPHY

$if(natbib)$
  \usepackage[$natbiboptions$]{natbib}
  \bibliographystyle{$if(biblio-style)$$biblio-style$$else$plainnat$endif$}
$endif$
$if(biblatex)$
  \usepackage[$if(biblio-style)$style=$biblio-style$,$endif$$for(biblatexoptions)$$biblatexoptions$$sep$,$endfor$]{biblatex}
  $for(bibliography)$
  \addbibresource{$bibliography$}
  $endfor$
$endif$
$if(csl-refs)$
  \newlength{\cslhangindent}
  \setlength{\cslhangindent}{1.5em}
  \newlength{\csllabelwidth}
  \setlength{\csllabelwidth}{3em}
  \newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
   {% don't indent paragraphs
    \setlength{\parindent}{0pt}
    % turn on hanging indent if param 1 is 1
    \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
    % set entry spacing
    \ifnum #2 > 0
    \setlength{\parskip}{#2\baselineskip}
    \fi
   }%
   {}
  \usepackage{calc}
  \newcommand{\CSLBlock}[1]{#1\hfill\break}
  \newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
  \newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
  \newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}
$endif$

%%% META

\title{$title$}
\author{$for(author)$$author$$sep$ \and $endfor$}
\date{$date$}
$if(subtitle)$
  \subtitle{$subtitle$}
$endif$


$for(header-includes)$
  $header-includes$
$endfor$

\usepackage{hyperref}
\hypersetup{
  $if(title-meta)$
    pdftitle={$title-meta$},
  $endif$
  $if(author-meta)$
    pdfauthor={$author-meta$},
  $endif$
  $if(lang)$
    pdflang={$lang$},
  $endif$
  $if(subject)$
    pdfsubject={$subject$},
  $endif$
  $if(keywords)$
    pdfkeywords={$for(keywords)$$keywords$$sep$, $endfor$},
  $endif$
  $if(colorlinks)$
    colorlinks=true,
    linkcolor=$if(linkcolor)$$linkcolor$$else$blue$endif$,
    filecolor=$if(filecolor)$$filecolor$$else$Maroon$endif$,
    citecolor=$if(citecolor)$$citecolor$$else$black$endif$,
    urlcolor=$if(urlcolor)$$urlcolor$$else$purple$endif$,
  $else$
    hidelinks,
  $endif$
  pdfcreator={LaTeX via pandoc}
}


\begin{document}

\frame{\titlepage}

$if(toc)$
  \begin{frame}$if(toc-allowframebreaks)$[allowframebreaks]$endif$
  $if(toc-title)$
    \frametitle{$toc-title$}
  $endif$
  \tableofcontents[hideallsubsections]
  \end{frame}
$endif$

$body$

$if(natbib)$
  $if(bibliography)$
    $if(biblio-title)$
      $if(has-chapters)$
        \renewcommand\bibname{$biblio-title$}
      $else$
        \renewcommand\refname{$biblio-title$}
      $endif$
    $endif$
    \begin{frame}[allowframebreaks]{$biblio-title$}
    \bibliographytrue
    \bibliography{$for(bibliography)$$bibliography$$sep$,$endfor$$for(bibliography-other)$$bibliography-other$$sep$,$endfor$}
    \end{frame}
  $endif$
$endif$
$if(biblatex)$
  \begin{frame}[allowframebreaks]{$biblio-title$}
  \bibliographytrue
  \printbibliography[heading=none]
  \end{frame}
$endif$

\end{document}
